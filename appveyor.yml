services:
  - postgresql96

before_test:
environment:
  PGUSER: postgres
  PGPASSWORD: Password12!

install:
  - cinst elixir
  - cinst mingw
  - SET PATH=C:\ProgramData\chocolatey\lib\Elixir\bin;C:\tools\mingw64\bin;%PATH%
  - PATH=C:\Program Files\PostgreSQL\9.6\bin\;%PATH%
  - PATH=C:\Program Files\PostgreSQL\9.6\bin\;%PATH%
  - psql -c "create role sealas with login password 'sealas';" -U postgres
  - psql -c 'create database sealas with owner sealas;' -U postgres
  - yarn
  - mix deps.get
  - mix local.hex --force
  - mix local.rebar --force

build_script:
  - yarn run mdlint
  - mix compile
  - mix test
